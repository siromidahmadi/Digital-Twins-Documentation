<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Digital Twins Project</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <header>
    <h1>üåç Add Project</h1>
    <nav>
      <a href="index.html">Home</a> | 
      <a href="projects.html">Projects</a>
    </nav>
  </header>

  <main>
    <form id="addProjectForm">
      <div>
        <label>Project Title*</label>
        <input type="text" id="projectTitle" required placeholder="Project Name">
      </div>

      <div>
        <label>Category*</label>
        <select id="projectCategory" required>
          <option value="">Select‚Ä¶</option>
          <option value="computer-science">Computer Science</option>
          <option value="architecture">Architecture / Other Team</option>
        </select>
      </div>

      <div>
        <label>Owner</label>
        <input type="text" id="projectOwner" placeholder="Your name or team">
      </div>

      <div>
        <label>Goal*</label>
        <textarea id="projectGoal" rows="2" required placeholder="Short paragraph"></textarea>
      </div>

      <div>
        <label>Key Features</label>
        <textarea id="projectFeatures" rows="3" placeholder="One per line"></textarea>
      </div>

      <div>
        <label>File Structure</label>
        <textarea id="projectFileStructure" rows="3" placeholder="/project\n‚îú‚îÄ /dir\n‚îî‚îÄ file"></textarea>
      </div>

      <div>
        <label>Modules</label>
        <textarea id="projectModules" rows="4" placeholder="Title | Function | DataTypes | ProblemSolved"></textarea>
      </div>

      <div>
        <label>Module Functions</label>
        <textarea id="projectModuleFunctions" rows="3" placeholder="One per line"></textarea>
      </div>

      <div>
        <label>Problem it Solves</label>
        <textarea id="projectProblem" rows="2" placeholder="What problem does this solve?"></textarea>
      </div>

      <div>
        <label>Data Types</label>
        <textarea id="projectDataTypes" rows="2" placeholder="GeoJSON\nCSV"></textarea>
      </div>

      <div>
        <label>Conclusion</label>
        <textarea id="projectConclusion" rows="2" placeholder="Summary or next steps"></textarea>
      </div>

      <button type="submit">üíæ Save Project</button>
    </form>
  </main>

  <footer>
    <p>¬© <span id="year"></span> Digital Twins</p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    document.getElementById('year').innerText = new Date().getFullYear();
    const STORAGE_KEY = 'digitalTwinsProjects';

    // Parse modules
    function parseModules(text){
      return text.split('\n').map(line => {
        const parts = line.split('|').map(s => s.trim());
        return {
          title: parts[0] || '',
          function: parts[1] || '',
          dataTypes: parts[2] ? parts[2].split(',').map(s => s.trim()) : [],
          problemSolved: parts[3] || ''
        };
      }).filter(m => m.title);
    }

    // Save project
    document.getElementById('addProjectForm').addEventListener('submit', e => {
      e.preventDefault();
      const project = {
        title: document.getElementById('projectTitle').value.trim(),
        category: document.getElementById('projectCategory').value,
        owner: document.getElementById('projectOwner').value.trim(),
        goal: document.getElementById('projectGoal').value.trim(),
        features: document.getElementById('projectFeatures').value.split('\n').map(s => s.trim()).filter(Boolean),
        fileStructure: document.getElementById('projectFileStructure').value.trim(),
        modules: parseModules(document.getElementById('projectModules').value),
        moduleFunctions: document.getElementById('projectModuleFunctions').value.split('\n').map(s => s.trim()).filter(Boolean),
        problem: document.getElementById('projectProblem').value.trim(),
        dataTypes: document.getElementById('projectDataTypes').value.split('\n').map(s => s.trim()).filter(Boolean),
        conclusion: document.getElementById('projectConclusion').value.trim(),
        date: new Date().toISOString()
      };

      const projects = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      projects.push(project);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(projects));

      alert('Project saved!');
      document.getElementById('addProjectForm').reset();
    });
  </script>
</body>
</html>
