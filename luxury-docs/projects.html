<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Twins Hub ‚Äî Projects</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0c0c10; --card:#121218; --muted:#a5a7b0; --text:#e9e9ef; --primary:#c9a24a; --primary2:#9b7b2e; --border:rgba(255,255,255,0.08); --ring:rgba(201,162,74,0.35); --shadow:0 20px 50px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.03); }
    body { margin:0; background: radial-gradient(1200px 600px at 10% -10%, rgba(201,162,74,.15), transparent 60%), radial-gradient(1000px 500px at 100% 0%, rgba(90,90,255,.08), transparent 50%), var(--bg); color:var(--text); font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; -webkit-font-smoothing:antialiased; }
    header { position:sticky; top:0; z-index:5; background:linear-gradient(180deg, rgba(12,12,16,.9), rgba(12,12,16,.6)); backdrop-filter: blur(6px); border-bottom:1px solid var(--border); }
    .shell { max-width:1100px; margin:0 auto; padding:18px 22px; display:flex; align-items:center; justify-content:space-between; }
    .brand { display:flex; align-items:center; gap:12px; color:var(--text); text-decoration:none; }
    .brand-mark { width:36px; height:36px; border-radius:12px; background:linear-gradient(135deg, var(--primary), var(--primary2)); display:grid; place-items:center; color:#0b0b0b; font-weight:700; box-shadow:var(--shadow); }
    .brand-title { font-family:'Playfair Display',serif; font-size:1.2rem; letter-spacing:.4px; }
    nav a { color:var(--muted); text-decoration:none; margin-left:14px; font-weight:500; }
    nav a:hover { color:var(--text); }

    main { padding:32px 22px 60px; }
    .container { max-width:1100px; margin:0 auto; }
    .hero { display:flex; align-items:flex-end; justify-content:space-between; gap:20px; margin-bottom:18px; }
    .hero h1 { margin:0; font-family:'Playfair Display',serif; font-size:2rem; }
    .hint { color:var(--muted); }

    .controls { margin: 14px 0 20px; }
    .tabs { display:flex; gap:10px; flex-wrap:wrap; }
    .tab { padding:10px 14px; border-radius:12px; border:1px solid var(--border); background:rgba(255,255,255,.02); color:var(--muted); cursor:pointer; font-weight:600; }
    .tab:hover { color:var(--text); border-color:var(--primary); box-shadow:0 0 0 3px var(--ring); }
    .tab.active { color:#0b0b0b; background:linear-gradient(135deg, var(--primary), var(--primary2)); border-color:transparent; box-shadow:0 8px 24px rgba(201,162,74,.25); }

    .list { display:grid; gap:14px; }
    .card { background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)); border:1px solid var(--border); border-radius:18px; box-shadow:var(--shadow); padding:16px 18px; opacity:0; transform: translateY(20px); animation: fadeInUp .5s forwards; }
    .item-title { margin:0 0 6px; font-size:1.1rem; font-weight:600; color:#fff; }
    .meta { color:var(--muted); margin:4px 0 10px; }
    .btn { background:linear-gradient(135deg, var(--primary), var(--primary2)); border:none; color:#0b0b0b; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer; box-shadow:0 8px 24px rgba(201,162,74,.25); }
    .btn:hover { box-shadow:0 12px 28px rgba(201,162,74,.35); }
    .btn-row { display:flex; gap:8px; flex-wrap:wrap; }
    .btn-ghost { background: rgba(255,255,255,.05); color: var(--text); border:1px solid var(--border); }
    .btn-danger { background: linear-gradient(135deg, #ff6b6b, #d64545); color: #fff; }
    @keyframes fadeInUp { to { opacity:1; transform: translateY(0); } }

    footer { border-top:1px solid var(--border); }
    .foot-inner { max-width:1100px; margin:0 auto; padding:18px 22px; color:var(--muted); }
  </style>
</head>
<body>
  <header>
    <div class="shell">
      <a class="brand" href="index.html">
        <div class="brand-mark">DH</div>
        <div class="brand-title">Digital Twins Hub</div>
      </a>
      <nav>
        <a href="index.html">Home</a>
        <a href="add-project.html">Add Project</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="container">
      <div class="hero">
        <div>
          <h1>Projects</h1>
          <div class="hint">Browse saved projects and export any to PDF.</div>
        </div>
      </div>

      <div class="controls">
        <div class="tabs" id="categoryTabs">
          <button class="tab active" data-filter="">All</button>
          <button class="tab" data-filter="computer-science">Computer Science</button>
          <button class="tab" data-filter="architecture">Architecture / Other Team</button>
        </div>
      </div>

      <section id="saved-projects" class="list">
        <p class="hint">No projects yet.</p>
      </section>
    </div>
  </main>

  <footer>
    <div class="foot-inner">¬© <span id="year"></span> Digital Twins Hub</div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    const STORAGE_KEY = 'digitalTwinsProjects';
    let currentFilter = '';

    function downloadProjectPDF(index){
      const projects = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const p = projects[index];
      if(!p) return;
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      let y = 10;
      doc.setFontSize(16);
      doc.text(p.title, 10, y); y+=10;
      doc.setFontSize(12);
      doc.text(`Category: ${p.category}`, 10, y); y+=8;
      doc.text(`Owner: ${p.owner}`, 10, y); y+=8;
      doc.text('Goal: ' + p.goal, 10, y); y+=10;
      if(p.features.length) doc.text('Features: ' + p.features.join(', '), 10, y); y+=10;
      if(p.fileStructure) doc.text('File Structure:\n' + p.fileStructure, 10, y); y+=10;
      if(p.modules.length){
        doc.text('Modules:', 10, y); y+=8;
        p.modules.forEach(m => { doc.text(`${m.title} | ${m.function} | ${m.dataTypes.join(', ')} | ${m.problemSolved}`, 10, y); y+=8; });
      }
      if(p.moduleFunctions.length) doc.text('Module Functions: ' + p.moduleFunctions.join(', '), 10, y); y+=10;
      if(p.problem) doc.text('Problem: ' + p.problem, 10, y); y+=10;
      if(p.dataTypes.length) doc.text('Data Types: ' + p.dataTypes.join(', '), 10, y); y+=10;
      if(p.conclusion) doc.text('Conclusion: ' + p.conclusion, 10, y); y+=10;
      doc.save(`${p.title}.pdf`);
    }

    function renderItem(p, index, sourceArray){
      const card = document.createElement('div');
      card.className = 'card project-card';
      card.innerHTML = `
        <h3 class="item-title">${p.title}</h3>
        <div class="meta">${p.category || 'Uncategorized'} ‚Ä¢ ${p.owner || 'Unknown owner'}</div>
        <p style="margin:8px 0 12px">${p.goal || ''}</p>
        <div class="btn-row">
          <button class="btn" onclick="downloadProjectPDF(${index})">üì• Download PDF</button>
          <button class="btn btn-ghost" onclick="modifyProject(${index})">‚úèÔ∏è Modify</button>
          <button class="btn btn-danger" onclick="deleteProject(${index})">üóë Delete</button>
        </div>
      `;
      return card;
    }

    function loadProjects(){
      const projects = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const container = document.getElementById('saved-projects');
      container.innerHTML = '';
      const filtered = currentFilter ? projects.filter(p => p.category === currentFilter) : projects;
      if(!filtered.length){ container.innerHTML = '<p class="hint">No projects yet for this category.</p>'; return; }
      filtered.slice().reverse().forEach((p, i) => container.appendChild(renderItem(p, projects.indexOf(p), projects)));
      const cards = container.querySelectorAll('.project-card');
      cards.forEach((card, i) => { card.style.animationDelay = `${i * 0.08}s`; });
    }

    function deleteProject(idx){
      const projects = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      if(idx < 0 || idx >= projects.length) return;
      if(!confirm('Delete this project?')) return;
      projects.splice(idx, 1);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(projects));
      loadProjects();
    }

    function modifyProject(idx){
      const projects = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const p = projects[idx];
      if(!p) return;
      const title = prompt('Title:', p.title || '');
      if(title === null) return;
      const category = prompt('Category (computer-science | architecture):', p.category || '');
      if(category === null) return;
      const owner = prompt('Owner:', p.owner || '');
      if(owner === null) return;
      const goal = prompt('Goal:', p.goal || '');
      if(goal === null) return;
      p.title = title.trim();
      p.category = (category || '').trim();
      p.owner = owner.trim();
      p.goal = goal.trim();
      projects[idx] = p;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(projects));
      loadProjects();
    }

    function setupTabs(){
      const tabs = document.querySelectorAll('#categoryTabs .tab');
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentFilter = tab.getAttribute('data-filter') || '';
          loadProjects();
        });
      });
    }

    document.addEventListener('DOMContentLoaded', () => { setupTabs(); loadProjects(); });
  </script>
</body>
</html>
